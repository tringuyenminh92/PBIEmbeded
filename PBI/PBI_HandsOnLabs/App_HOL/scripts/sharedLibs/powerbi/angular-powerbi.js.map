{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8671f4fc0a7d656d9a65","webpack:///./src/angular-powerbi.ts","webpack:///./src/components/powerbi-report/component.ts","webpack:///./src/components/powerbi-component/component.ts","webpack:///./src/services/powerbi.ts","webpack:///external \"angular\""],"names":[],"mappings":"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","file":"angular-powerbi.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angular-powerbi\"] = factory(require(\"angular\"));\n\telse\n\t\troot[\"angular-powerbi\"] = factory(root[\"angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8671f4fc0a7d656d9a65\n **/","import reportDirective from './components/powerbi-report/component';\nimport componentDirective from './components/powerbi-component/component';\nimport service from './services/powerbi';\nimport * as angular from 'angular';\n\nexport const components = {\n  report: reportDirective,\n  component: componentDirective\n};\n\nexport {\n  service\n}\n\nangular.module('powerbi.global', [])\n  .value('PowerBiGlobal', window.powerbi)\n  ;\n\nangular.module('powerbi.service', [\n  'powerbi.global'\n])\n  .service('PowerBiService' /* service.name */, service)\n  ;\n\nangular.module('powerbi.components.powerbiReport', [\n  'powerbi.service'\n])\n  // Attempt to use name from class, but there is error in Phantom\n  // 'TypeError: Attempted to assign to readonly property.'\n  .directive('powerbiReport' /* reportDirective.name */, () => new reportDirective())\n  ;\n\nangular.module('powerbi.components.powerbiComponent', [\n  'powerbi.service'\n])\n  .directive('powerbiComponent' /* componentDirective.name */, () => new componentDirective())\n  ;\n\nangular.module('powerbi.components', [\n  'powerbi.components.powerbiReport',\n  'powerbi.components.powerbiComponent'\n]);\n\nangular.module('powerbi', [\n  'powerbi.service',\n  'powerbi.components'\n]);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/angular-powerbi.ts\n **/","import * as pbi from 'powerbi-client';\nimport * as models from 'powerbi-models';\nimport PowerBiService from '../../services/powerbi';\n\nexport class Controller {\n  accessToken: string;\n  component: pbi.Embed;\n  embedUrl: string;\n  reportId: string;\n  name: string;\n  onEmbedded: Function;\n  options: models.ISettings;\n  private powerBiService: PowerBiService;\n  private $scope: ng.IScope;\n  private $timeout: ng.ITimeoutService;\n\n  /* tslint:disable:member-ordering */\n  static $inject = [\n    '$scope',\n    '$timeout',\n    'PowerBiService'\n  ];\n  /* tslint:enable:member-ordering */\n\n  constructor($scope: ng.IScope, $timeout: ng.ITimeoutService, powerBiService: PowerBiService) {\n    this.$scope = $scope;\n    this.$timeout = $timeout;\n    this.powerBiService = powerBiService;\n  }\n\n  /**\n   * Handler after component is inserted in the DOM. If required attributes are valid embed immediately\n   * otherwise, watch attributes and embed when they are valid. \n   */\n  init(element: HTMLElement) {\n    if (this.validateRequiredAttributes()) {\n      this.embed(element);\n    }\n\n    // TODO: Look for another way to ensure both attributes have changed before calling this.embed.\n    // In most cases embedUrl and accessToken will be updated at the same time, but this takes two cycles\n    // for the changes to propegate from the parent $scope to this $scope.\n    // perhaps we can just use $timeout() directly. \n    const debouncedEmbed = this.debounce(() => {\n      if (this.validateRequiredAttributes()) {\n        this.embed(element);\n      }\n      else if (this.component) {\n        this.reset(element);\n      }\n    }, 100);\n\n    this.$scope.$watch(() => this.embedUrl, (embedUrl, oldEmbedUrl) => {\n      // Guard against initialization\n      if (embedUrl === oldEmbedUrl) {\n        return;\n      }\n\n      debouncedEmbed(element);\n    });\n\n    this.$scope.$watch(() => this.accessToken, (accessToken, oldAccessToken) => {\n      // Guard against initialization\n      if (accessToken === oldAccessToken) {\n        return;\n      }\n\n      debouncedEmbed(element);\n    });\n  }\n\n  /**\n   * Handler when component is removed from DOM. Forwards call to service to perform cleanup of references before DOM is modified.\n   */\n  reset(element: HTMLElement) {\n    this.powerBiService.reset(element);\n    this.component = null;\n  }\n\n  /**\n   * Given an HTMLElement, construct an embed configuration based on attributes and pass to service.\n   */\n  private embed(element: HTMLElement) {\n    const config: pbi.IEmbedConfiguration = {\n      type: 'report',\n      embedUrl: this.embedUrl,\n      accessToken: this.accessToken,\n      id: this.reportId,\n      uniqueId: this.name\n    };\n\n    angular.extend(config, this.options);\n\n    this.component = this.powerBiService.embed(element, config);\n    this.onEmbedded({ $embed: this.component });\n  }\n\n  private debounce(func: Function, wait: number): Function {\n    let previousTimeoutPromise: any;\n\n    return (...args: any[]) => {\n      if (previousTimeoutPromise) {\n        this.$timeout.cancel(previousTimeoutPromise);\n      }\n\n      previousTimeoutPromise = this.$timeout(() => func(...args), wait);\n    };\n  }\n\n  /**\n   * Ensure required attributes (embedUrl and accessToken are valid before attempting to embed) \n   */\n  private validateRequiredAttributes() {\n    return (typeof this.embedUrl === 'string' && this.embedUrl.length > 0)\n      && (typeof this.accessToken === 'string' && this.accessToken.length > 0);\n  }\n}\n\nexport default class Directive {\n  // static name = \"powerbiReport\";\n  restrict = \"E\";\n  replace = true;\n  template = '<div class=\"powerbi-frame\"></div>';\n  scope = {\n    accessToken: \"=\",\n    embedUrl: \"=\",\n    reportId: \"=?\",\n    name: \"=?\",\n    options: \"=?\",\n    onEmbedded: \"&\"\n  };\n  controller = Controller;\n  bindToController = true;\n  controllerAs = \"vm\";\n\n  link($scope: ng.IScope, element: ng.IAugmentedJQuery, attributes: any, controller: Controller, transcludeFn: any) {\n    controller.init(element[0]);\n\n    $scope.$on('$destroy', () => {\n      controller.reset(element[0]);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/powerbi-report/component.ts\n **/","import * as pbi from 'powerbi-client';\nimport PowerBiService from '../../services/powerbi';\n\nexport class Controller {\n  component: pbi.Embed;\n  options: pbi.IEmbedConfiguration;\n  onEmbedded: Function;\n  validationMap: any;\n  private powerBiService: PowerBiService;\n  private $scope: ng.IScope;\n\n  /* tslint:disable:member-ordering */\n  static $inject = [\n    '$scope',\n    'PowerBiService'\n  ];\n  /* tslint:enable:member-ordering */\n\n  constructor($scope: ng.IScope, powerBiService: PowerBiService) {\n    this.$scope = $scope;\n    this.powerBiService = powerBiService;\n\n    this.validationMap = {\n      'report': this.validateReportOptions\n    };\n  }\n\n  /**\n   * Handler after component is inserted in the DOM. If required attributes are valid embed immediately\n   * otherwise, watch attributes and embed when they are valid. \n   */\n  init(element: HTMLElement) {\n    if (this.validateOptions(this.options)) {\n      this.embed(element, this.options);\n    }\n\n    this.$scope.$watch(() => this.options, (options, oldOptions) => {\n      // Guard against initialization\n      if (options === oldOptions) {\n        return;\n      }\n\n      if (this.validateOptions(this.options)) {\n        this.embed(element, this.options);\n      }\n      else if (this.component) {\n        this.reset(element);\n      }\n    }, true);\n  }\n\n  /**\n   * Handler when component is removed from DOM. Forwards call to service to perform cleanup of references before DOM is modified.\n   */\n  reset(element: HTMLElement) {\n    this.powerBiService.reset(element);\n    this.component = null;\n  }\n\n  /**\n   * Given an HTMLElement, construct an embed configuration based on attributes and pass to service.\n   */\n  private embed(element: HTMLElement, options: pbi.IEmbedConfiguration) {\n    this.component = this.powerBiService.embed(element, options);\n    this.onEmbedded({ $embed: this.component });\n  }\n\n  /**\n   * Ensure required options (embedUrl and accessToken are valid before attempting to embed) \n   */\n  private validateOptions(options: pbi.IEmbedConfiguration) {\n    if (!this.options\n      || !(typeof options.embedUrl === 'string' && options.embedUrl.length > 0)\n      || !(typeof options.accessToken === 'string' && options.accessToken.length > 0)\n    ) {\n      return false;\n    }\n\n    if (this.validationMap.hasOwnProperty(options.type) && typeof this.validationMap[options.type] === \"function\") {\n      return this.validationMap[options.type](options);\n    }\n    else {\n      return false;\n    }\n  }\n\n  private validateReportOptions(options: pbi.IEmbedConfiguration) {\n    return true;\n  }\n}\n\nexport default class Directive {\n  // static name = \"powerbiComponent\";\n  restrict = \"E\";\n  replace = true;\n  template = '<div class=\"powerbi-frame\"></div>';\n  scope = {\n    accessToken: \"=\",\n    embedUrl: \"=\",\n    options: \"=?\",\n    onEmbedded: \"&\"\n  };\n  controller = Controller;\n  bindToController = true;\n  controllerAs = \"vm\";\n\n  link($scope: ng.IScope, element: ng.IAugmentedJQuery, attributes: any, controller: Controller, transcludeFn: any) {\n    controller.init(element[0]);\n\n    $scope.$on('$destroy', () => {\n      controller.reset(element[0]);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/powerbi-component/component.ts\n **/","import * as pbi from 'powerbi-client';\n\nexport default class PowerBiService {\n  // static name = \"PowerBiService\";\n  private powerBiCoreService: pbi.service.Service;\n\n  /* tslint:disable:member-ordering */\n  static $inject = [\n    'PowerBiGlobal'\n  ];\n  /* tslint:enable:member-ordering */\n\n  constructor(powerbi: pbi.service.Service) {\n    this.powerBiCoreService = powerbi;\n  }\n\n  embed(element: HTMLElement, config: pbi.IEmbedConfiguration): pbi.Embed {\n    return this.powerBiCoreService.embed(element, config);\n  }\n\n  get(element: HTMLElement): pbi.Embed {\n    return this.powerBiCoreService.get(element);\n  }\n\n  find(uniqueId: string): pbi.Report | pbi.Tile {\n    return this.powerBiCoreService.find(uniqueId);\n  }\n\n  reset(element: HTMLElement): void {\n    this.powerBiCoreService.reset(element);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/services/powerbi.ts\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"angular\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}